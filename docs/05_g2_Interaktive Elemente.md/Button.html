<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1,user-scalable=no">
<meta name="description" content="Notwendige Kentnisse zur Bearbeitung eines Projekts von Webkinematik">

<meta name="date" content="Wed Jan 01 2020 00:00:00 GMT+0100 (Central European Standard Time)">
<meta name="keywords" content="mechanismentechnik,Bewegungs- und Kraftübertragung,g2">
<title>Dokumentation von Webkinematik</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.18.1/styles/tomorrow-night-bright.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.css">
<link rel="stylesheet" href="../theme/style.css">
</head>
<body id="top">
<main>
  <nav>
<p><a href="../index.html"><img src="../img/cover.png"></img></a></p>
<h2 id="inhaltsverzeichnis">Inhaltsverzeichnis</h2>
<ol start="1">
    <li><details><summary markdown="span">Mechanismentechnik Wiederholung</summary>
        <ol>
        <li><a href="../01_Mechanismentechnik_Wiederholung.md/Getriebekinematik.html">Getriebekinematik</a></li> 
        <li><a href="../01_Mechanismentechnik_Wiederholung.md/Lageanalyse des Viergelenks.html">Lageanalyse des Viergelenks</a></li>
        <li><a href="../01_Mechanismentechnik_Wiederholung.md/Übertragungsgleichung.html">Übertragungsgleichung und Übertragungsfunktion</a></li>
        <li><a href="../01_Mechanismentechnik_Wiederholung.md/Koppelkurven.html">Koppelkurven</a></li>
        <li><a href="../01_Mechanismentechnik_Wiederholung.md/Geschwindigkeit.html">Geschwindigkeit</a></li>
        <li><a href="../01_Mechanismentechnik_Wiederholung.md/Beschleunigung.html">Beschleunigung</a></li>
        <li><a href="../01_Mechanismentechnik_Wiederholung.md/Relativbewegung.html">Relativbewegung</a></li>
        <li><a href="../01_Mechanismentechnik_Wiederholung.md/Pole der ebenen Bewegung.html">Pole der ebenen Bewegung</a></li> 
        </ol>
    </details></li>
</ol>
<ol start="2">
    <li><details><summary markdown="span">Webtechnologien</summary>
    <ol>
        <li><a href="../02_Webtechnologie.md/Grundlagen.html">Grundlagen</a></li>
        <li><a href="../02_Webtechnologie.md/Uebungen.html">Übungen</a></li> 
    </ol>
    </details></li>
</ol>
<ol start="3">
    <li><details><summary markdown="span">Grafik mit der Bibliotek g2</summary>
    <ol>
        <li><a href="../03_Grafik_mit_der_Bibliothek_g2.md/Grafik im Webbrowser.html">Grafik im Webbrowser</a></li>
        <li><a href="../03_Grafik_mit_der_Bibliothek_g2.md/g2 Methode.html">Methoden der g2 Bibliothek</a></li>
        <li><a href="../03_Grafik_mit_der_Bibliothek_g2.md/g2ExtErweiterung.html">Erweiterung g2.ext</a></li>
        <li><a href="../03_Grafik_mit_der_Bibliothek_g2.md/g2mecErweiterung.html">Erweiterung g2.mec</a></li>
        <li><a href="../03_Grafik_mit_der_Bibliothek_g2.md/g2 ChartErweiterung.html">Erweiterung g2.chart</a></li>
        <li><a href="../03_Grafik_mit_der_Bibliothek_g2.md/Übungen.html">Übungen</a></li>
    </ol>
    </details></li>
</ol>
<ol start="4">
    <li><details><summary markdown="span">g2 Animation</summary>
    <ol>
        <li><a href="../04_g2_Animation.md/Animation mit g2 am Beispiel.html">Animation mit g2 am Beispiel einer Kurbel</a></li>
        <li><a href="../04_g2_Animation.md/Übung-Federschwinge.html">Übung - Federschwinge</a></li>
        <li><a href="../04_g2_Animation.md/Übung-Rad.html">Übung - Rad</a></li>
        <li><a href="../04_g2_Animation.md/Übung-Pendelrolle.html">Übung - Pendelrolle</a></li>
    </ol>
    </details></li>
</ol>
<ol start="5">
    <li><details><summary markdown="span">g2 Interaktive Elemente</summary>
    <ol>
        <li><a href="../05_g2_Interaktive Elemente.md/Einführung Interaktivität.html">Einführung Interaktivität</a></li>
        <li><a href="../05_g2_Interaktive Elemente.md/Button.html">Button</a></li>
        <li><a href="../05_g2_Interaktive Elemente.md/Dropdown Menü.html">Dropdown Menü</a></li>
        <li><a href="../05_g2_Interaktive Elemente.md/Checkbox.html">Checkbox</a></li>
        <li><a href="../05_g2_Interaktive Elemente.md/Slider 1:2.html">Slider 1/2</a></li>
        <li><a href="../05_g2_Interaktive Elemente.md/Slider 2:2.html">Slider 2/2</a></li>
        <li><a href="../05_g2_Interaktive Elemente.md/GUI Bibliotheken.html">GUI Bibliotheken</a></li>
    </ol>
    </details></li>
</ol>
<ol start="6">
    <li><details><summary markdown="span">Die 5 Grundfälle der ebenen Vektoralgebra</summary>
    <ol>
        <li><a href="../06_Die_5_Grundfaelle_der_ebenen_Vektoralgebra.md/Grundfall I.html">Grundfall I</a></li>
        <li><a href="../06_Die_5_Grundfaelle_der_ebenen_Vektoralgebra.md/Grundfall II & III.html">Grundfall II & III</a></li>
        <li><a href="../06_Die_5_Grundfaelle_der_ebenen_Vektoralgebra.md/Grundfall IV.html">Grundfall IV</a></li>
        <li><a href="../06_Die_5_Grundfaelle_der_ebenen_Vektoralgebra.md/Grundfall V.html">Grundfall V</a></li> 
    </ol>
    </details></li>
</ol>
</nav>

<article>

<header>
<h1>Dokumentation von Webkinematik</h1>



<h5>Oktober 2020</h5>
<h5><b>Keywords:</b> mechanismentechnik, Bewegungs- und Kraftübertragung, g2</h5>
</header>
<h4 id="button">Button</h4>
<p>Es soll ein Button erstellt werden mit dem der Benutzer die Animation Starten und Stoppen kann.</p>
<iframe width=100% height=420 frameborder='no' src='https://goessner.github.io/webkinematik/Interaktivitaet/1 Kurbel - button.html'></iframe>
<p>Das <a href="https://developer.mozilla.org/de/docs/Web/HTML/Element/button">Button-Element</a> wird durch einen öffnenden und einen schließenden Tag erstellt, zwischen denen die Beschriftung des Buttons eingefügt wird:</p>
<p><code>&lt;button&gt;Beschriftung&lt;/button&gt;</code></p>
<p>Zudem sollte mindestens ein Id-Attribut vergeben werden um dem Button im Script Eventhandler hinzufügen zu können. Man kann dies zwar auch direkt im HTML-Teil erledigen, dann ist jedoch nur möglich maximal einen Eventhandler pro HTML-Element zu definieren.</p>
<p>Wir fügen nun das Button-Element, zusammen mit einem Umbruch , unter dem Canvas-Element dem Quelltext hinzu:</p>
<pre><code class="code-line language-HTML"><div>...
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Kurbel<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>             
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"c"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"300"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"300"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border-width:1px;border-style:solid"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"b"</span>&gt;</span>Start/Stop<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
 
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://gitcdn.xyz/repo/goessner/g2/master/src/g2.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    ...
    ````
Die Idee ist, `phi` nur dann zu inkrementieren, wenn eine Variable `run` auf `true` steht. Ein Klick auf den Button soll eine Funktion aufrufen, die den Wert von `run` zwischen `true` und false umschaltet.

Dazu müssen wir natürlich die Variable initialisieren indem wir am Anfang des Scripts `run = true` hinzufügen. An die selbe Stelle kommt, wie schon beim Canvas, eine Abkürzung um das Button-Element über seine Id im Script ansprechen zu können:

`b = document.getElementById('b')`

Da wie gesagt `phi` nur dann erhöht werden soll wenn `run = true` ist, fügen wir innerhalb der `position()` Funktion, vor die Zeile in der Inkrementiert wird, die entsprechende Bedingung hinzu:

```HTML
function position() {
    // baut dynamische Kurbel auf
    Kurbel.del()
          .lin({x1:0, y1:0, x2:mec.A.x, y2:mec.A.y, lw:3})
          .nod({...mec.A});
 
    // inkrementiert phi
    if (run) 
        phi += pi/180; 
}
</div></code></pre>
<p>Jetzt kümmern wir uns um die Funktion <code>startstop()</code>, die den Wert der Variable <code>run</code> zwischen <code>true</code> und <code>false</code> wechselt. Da eine Variable vom Datentyp boolean nur diese zwei Zustände annehmen kann, lässt sich das ganze recht einfach durch in if-else Statement erledigen. Es wird geprüft ob <code>run</code> den Wert <code>true</code> hat, falls das so ist wird <code>run =false</code> zugewiesen. Falls <code>run</code> nicht <code>true</code> ist muss es false sein und es wird <code>true</code> zugewiesen:</p>
<pre><code class="code-line language-HTML"><div>// wechselt Status der Lauferlaubnis
function startstop() {
    if (run) {
        run = false;
    } else {
        run = true;
    }
}
</div></code></pre>
<p>An dieser Stelle wird darauf hingewiesen, dass if-else-Konstrukte durch den sogenannten <a href="https://developer.mozilla.org/de/docs/Web/JavaScript/Reference/Operators/Conditional_Operator">ternären Operator</a> verkürzt werden können.</p>
<pre><code class="code-line language-HTML"><div>if (Bedingung) {
   Anweisung1    
} else {         
   Anweisung2    
}                
</div></code></pre>
<p>lässt sich somit auch in der Form</p>
<p><code>Bedingung ? Anweisung1 : Anweisung2</code></p>
<p>schreiben, also hier</p>
<p><code>run = run</code> ? <code>false : true</code>;</p>
<p>Noch kürzer und ohne Bedingung, aber für Programmieranfänger vielleicht nicht so intuitiv lässt sich die Funktion startstop() auch so schreiben:</p>
<p><code>function startstop() {    run = !run;          }</code></p>
<p>Dadurch wird der momentane Wert der Variable negiert.</p>
<p>Zuletzt muss noch der Button mit der eben erstellten Funktion verknüpft werden. Dazu bindet man am Ende des Scripts einen Eventhandler an das Button-Element. Dies geschieht mittels folgender Syntax:</p>
<p><code>Eventziel.addEventListener(Eventtyp, Listener[, optionale Parameter])</code></p>
<p>Das Eventziel ist der Button selbst, bzw. seine Id die wir Dank der Abkürzung in unserem Beispiel über <code>b</code> erreichen. Der Eventtyp für den Button sollte ein Klickevent sein und wird als <code>string</code> definiert, also &quot;click&quot; (direkt als HTML-Attribut würde man onclick definieren).</p>
<p>Der Listener ist die Routine die ausgeführt werden soll, wenn der definierte Eventtyp eintritt. Hier soll die Funktion <code>startstop()</code> aufgerufen werden, also trägt man startstop (im Gegensatz zur Definition im HTML-Tag ohne Klammern) ein. Wer sich für die optionalen Parameter interessiert, der möge sich im <a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener">MDN</a> umschauen. Der Vorteil dieser Methode gegenüber dem Hinzufügen im HTML-Tag oder auch mittels Punktoperator (<code>b.onclick = startstop()</code>) besteht darin, dass es so möglich ist mehrere Eventhandler an ein HTML-Element zu binden.</p>
<p>Für unser Beispiel sieht das ganze nun so aus:</p>
<pre><code class="code-line language-HTML"><div>// Eventlistener hinzufuegen
b.addEventListener("click",startstop);
</div></code></pre>
<p><strong>Ergebnis:</strong></p>
<p>Der fertige Quellcode sollte nun folgendermaßen aussehen:</p>
<pre><code class="code-line language-HTML"><div><span class="hljs-meta">&lt;!doctype html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">'utf-8'</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Kurbel<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
 
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Kurbel<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">canvas</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"c"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"300"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"300"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"border-width:1px;border-style:solid"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">canvas</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"b"</span>&gt;</span>Start/Stop<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
 
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://gitcdn.xyz/repo/goessner/g2/master/src/g2.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
 
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> cnv = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'c'</span>),
    ctx = cnv.getContext(<span class="hljs-string">'2d'</span>),
    b = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'b'</span>),
 
    pi = <span class="hljs-built_in">Math</span>.PI,
    l = <span class="hljs-number">100</span>,  <span class="hljs-comment">// Länge der Kurbel</span>
 
    mec = {
        <span class="hljs-keyword">get</span> ephi() { <span class="hljs-keyword">return</span> {<span class="hljs-attr">x</span>:<span class="hljs-built_in">Math</span>.cos(phi), <span class="hljs-attr">y</span>:<span class="hljs-built_in">Math</span>.sin(phi)}; },
        <span class="hljs-keyword">get</span> A() { <span class="hljs-keyword">return</span> {<span class="hljs-attr">x</span>:l*mec.ephi.x, <span class="hljs-attr">y</span>:l*mec.ephi.y}; }
    },
 
    Kurbel = g2(),  <span class="hljs-comment">// definiert Kurbel als g2() Objekt</span>
 
    <span class="hljs-comment">// baut und initialisiert statische Umgebung</span>
    world = g2().clr()
                .view({<span class="hljs-attr">cartesian</span>:<span class="hljs-literal">true</span>,<span class="hljs-attr">x</span>:<span class="hljs-number">150</span>,<span class="hljs-attr">y</span>:<span class="hljs-number">150</span>})
                .use({<span class="hljs-attr">grp</span>:Kurbel})
                .nodfix({<span class="hljs-attr">x</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">y</span>:<span class="hljs-number">0</span>});
 
<span class="hljs-keyword">let</span> phi = <span class="hljs-number">0</span>, <span class="hljs-comment">// Laufvariable</span>
    run = <span class="hljs-literal">true</span>;  <span class="hljs-comment">// Boolean als Schalter um zu prüfen ob Animation läuft</span>
 
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">position</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// baut dynamische Kurbel auf</span>
    Kurbel.del()
          .lin({<span class="hljs-attr">x1</span>:<span class="hljs-number">0</span>, <span class="hljs-attr">y1</span>:<span class="hljs-number">0</span>, <span class="hljs-attr">x2</span>:mec.A.x, <span class="hljs-attr">y2</span>:mec.A.y, <span class="hljs-attr">lw</span>:<span class="hljs-number">3</span>})
          .nod({...mec.A});
 
    <span class="hljs-comment">// inkrementiert phi</span>
    <span class="hljs-keyword">if</span> (run)
        phi += pi/<span class="hljs-number">180</span>;
}
 
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">render</span>(<span class="hljs-params"></span>) </span>{
    position();  <span class="hljs-comment">// aktualisiere Position</span>
    world.exe(ctx);  <span class="hljs-comment">// rendert world in den Context</span>
    requestAnimationFrame(render);  <span class="hljs-comment">// asynchroner callback von render(), keine Rekursion!</span>
}
 
<span class="hljs-comment">// wechselt Status der Lauferlaubnis</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">startstop</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (run) {
        run = <span class="hljs-literal">false</span>;
    } <span class="hljs-keyword">else</span> {
        run = <span class="hljs-literal">true</span>;
    }
}
 
<span class="hljs-comment">/*
 *  Initialisierung
 */</span>
 
<span class="hljs-comment">// Eventlistener hinzufügen</span>
b.addEventListener(<span class="hljs-string">"click"</span>,startstop);
 
<span class="hljs-comment">// Animation anstoßen</span>
render();
 
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</div></code></pre>

</article>
</main>
<script src="../js/g2.html.js"></script>
<script src="../js/mec2.html.js"></script>
</body>
</html>